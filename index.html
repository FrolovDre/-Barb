<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Glow Trip — Эда едет к Серкану</title>
  <link rel="stylesheet" href="styles.css" />
  <meta name="description" content="Лёгкий idle/clicker в глам-поп эстетике: собирай Сияние стилем, покупай вещи, ускоряй поездку к встрече с другом." />
</head>
<body>
  <a class="skip-link" href="#main" tabindex="0">Пропустить к контенту</a>
  <header class="topbar" role="banner" aria-label="Статус и заголовок">
    <div class="brand">
      <!-- Inline SVG logo placeholder -->
      <svg aria-hidden="true" class="logo" width="28" height="28" viewBox="0 0 28 28">
        <defs>
          <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0" stop-color="#ff80bf"/>
            <stop offset="1" stop-color="#b388ff"/>
          </linearGradient>
        </defs>
        <circle cx="14" cy="14" r="13" fill="url(#g)"/>
        <path d="M9 16c2 2 8 0 10-6" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round"/>
      </svg>
      <h1>Glow Trip</h1>
    </div>
    <div class="counters" role="status" aria-live="polite">
      <div class="counter">
        <span class="label" data-i18n="counter.glow">Сияние</span>
        <span id="glowCount" class="value">0</span>
      </div>
      <div class="counter">
        <span class="label" data-i18n="counter.perClick">к/клик</span>
        <span id="perClick" class="value">0</span>
      </div>
      <div class="counter">
        <span class="label" data-i18n="counter.perSecond">к/сек</span>
        <span id="perSecond" class="value">0</span>
      </div>
    </div>
  </header>

  <main id="main" class="layout" role="main">
    <section class="play column" aria-label="Игровая зона">
      <div id="hero" class="hero" role="button" tabindex="0" aria-pressed="false" aria-label="Собрать стиль кликом">
        <!-- Minimal stylized character (CSS + SVG) -->
        <svg class="eda" width="180" height="220" viewBox="0 0 180 220" aria-hidden="true">
          <defs>
            <linearGradient id="skin" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="#ffd6e7"/>
              <stop offset="1" stop-color="#ffc4dd"/>
            </linearGradient>
            <linearGradient id="dress" x1="0" x2="1">
              <stop offset="0" stop-color="#ff8ad4"/>
              <stop offset="1" stop-color="#b29bff"/>
            </linearGradient>
          </defs>
          <circle cx="90" cy="55" r="28" fill="url(#skin)"/>
          <rect x="58" y="85" width="64" height="85" rx="18" fill="url(#dress)"/>
          <circle cx="77" cy="50" r="4" fill="#333"/>
          <circle cx="103" cy="50" r="4" fill="#333"/>
          <path d="M78 64c6 6 18 6 24 0" stroke="#333" stroke-width="2" fill="none" stroke-linecap="round"/>
          <path d="M56 40c16-18 60-18 76 0" stroke="#ff8ad4" stroke-width="6" fill="none" stroke-linecap="round"/>
          <rect x="60" y="170" width="20" height="18" rx="6" fill="#333"/>
          <rect x="100" y="170" width="20" height="18" rx="6" fill="#333"/>
          <!-- Sparkle group -->
          <g id="sparkles" class="sparkles">
            <path d="M10 10l3 6 6 3-6 3-3 6-3-6-6-3 6-3z" fill="#fff" opacity="0.9"/>
            <path d="M160 40l2 4 4 2-4 2-2 4-2-4-4-2 4-2z" fill="#fff" opacity="0.9"/>
          </g>
        </svg>
        <button id="clickBtn" class="click-btn" aria-label="Собрать стиль" data-i18n="cta.click">Собрать стиль</button>
      </div>

      <div class="trip" aria-label="Поездка к встрече">
        <div class="trip-head">
          <span data-i18n="trip.toFriend">Путь к встрече с Серканом</span>
          <span id="tripPercent" class="trip-percent">0%</span>
        </div>
        <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Прогресс поездки">
          <div id="progressFill" class="progress-fill"></div>
        </div>
        <div class="boosts" id="activeBoosts" aria-label="Активные эффекты/ивенты"></div>
      </div>
    </section>

    <section class="panel column" aria-label="Панели управления">
      <div class="tabs" role="tablist" aria-label="Разделы">
        <button class="tab active" data-tab="shop" role="tab" aria-selected="true" id="tab-shop" data-i18n="tab.shop">Магазин</button>
        <button class="tab" data-tab="achievements" role="tab" aria-selected="false" id="tab-achievements" data-i18n="tab.achievements">Достижения</button>
        <button class="tab" data-tab="settings" role="tab" aria-selected="false" id="tab-settings" data-i18n="tab.settings">Настройки</button>
      </div>

      <div class="tab-panels">
        <div class="panel-body active" data-panel="shop" role="tabpanel" aria-labelledby="tab-shop">
          <div id="shopCategories" class="shop-categories"></div>
          <div id="shopList" class="shop-list" aria-live="polite"></div>
        </div>

        <div class="panel-body" data-panel="achievements" role="tabpanel" aria-labelledby="tab-achievements">
          <div id="achievementsList" class="achievements-list" aria-live="polite"></div>
        </div>

        <div class="panel-body" data-panel="settings" role="tabpanel" aria-labelledby="tab-settings">
          <div class="settings">
            <div class="setting">
              <label><input type="checkbox" id="toggleSound" /> <span data-i18n="settings.sound">Звук</span></label>
            </div>
            <div class="setting">
              <label><input type="checkbox" id="toggleAnim" /> <span data-i18n="settings.animations">Анимации</span></label>
            </div>
            <div class="setting">
              <label><input type="checkbox" id="toggleHC" /> <span data-i18n="settings.highContrast">Высокая контрастность</span></label>
            </div>
            <div class="setting">
              <label for="langSelect" data-i18n="settings.language">Язык</label>
              <select id="langSelect" aria-label="Выбор языка">
                <option value="ru">Русский</option>
                <option value="en">English</option>
              </select>
            </div>
            <div class="setting buttons">
              <button id="btnSave" class="secondary" data-i18n="settings.save">Сохранить</button>
              <button id="btnExport" class="secondary" data-i18n="settings.export">Экспорт JSON</button>
              <label class="file-btn">
                <input type="file" id="fileImport" accept="application/json" />
                <span data-i18n="settings.import">Импорт JSON</span>
              </label>
              <button id="btnReset" class="danger" data-i18n="settings.reset">Сброс прогресса</button>
            </div>
            <p class="hint" data-i18n="settings.hint">Экспорт сохраняет файл с вашим прогрессом. Импорт восстановит игру из файла.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="bottombar" role="contentinfo">
    <span data-i18n="footer.hint">Совет: нажимайте Пробел/Enter для клика. Долгое зажатие не ускоряет набор.</span>
  </footer>

  <!-- Inline JSON fallbacks to allow running directly from file:// (no server). -->
  <!-- Runtime will prefer external files in assets/data/* if fetch() succeeds; otherwise parse these. -->

  <script type="application/json" id="items-data">
  {
    "items": [
      { "key": "dress_spark", "category": "clothes", "name": {"ru": "Платье «Искра»", "en": "Spark Dress"}, "desc": {"ru": "Добавляет сияние за клик.", "en": "Adds glow per click."}, "basePrice": 10, "maxLevel": 50, "effects": {"perClickAdd": 1, "perClickMult": 0.02} },
      { "key": "heels_glide", "category": "clothes", "name": {"ru": "Туфли «Скользящая походка»", "en": "Glide Heels"}, "desc": {"ru": "Немного ускоряют поездку.", "en": "Slightly speed up the trip."}, "basePrice": 35, "maxLevel": 40, "effects": {"tripSpeedMult": 0.03} },
      { "key": "bag_gloss", "category": "accessories", "name": {"ru": "Сумка «Глянец»", "en": "Gloss Bag"}, "desc": {"ru": "Чуть повышает шанс события.", "en": "Slightly increases event chance."}, "basePrice": 50, "maxLevel": 20, "effects": {"eventChance": 0.002} },
      { "key": "shades_star", "category": "accessories", "name": {"ru": "Очки «Звезда»", "en": "Star Shades"}, "desc": {"ru": "Продлевает действие бустов.", "en": "Extends boost durations."}, "basePrice": 90, "maxLevel": 15, "effects": {"boostDurationMult": 0.05} },
      { "key": "scooter_cute", "category": "transport", "name": {"ru": "Самокат «Мимишный»", "en": "Cute Scooter"}, "desc": {"ru": "Повышает скорость поездки и доход в секунду.", "en": "Trip speed and glow per second."}, "basePrice": 120, "maxLevel": 25, "effects": {"tripSpeedMult": 0.06, "perSecondAdd": 0.5} },
      { "key": "cabrio_breeze", "category": "transport", "name": {"ru": "Кабриолет «Бриз»", "en": "Breeze Cabrio"}, "desc": {"ru": "Серьёзный прирост скорости и пассивного дохода.", "en": "Strong speed & passive income."}, "basePrice": 600, "maxLevel": 20, "effects": {"tripSpeedMult": 0.12, "perSecondAdd": 2} },
      { "key": "limo_lux", "category": "transport", "name": {"ru": "Лимузин «Люкс»", "en": "Lux Limo"}, "desc": {"ru": "Мощный прирост скорости и пассивного дохода.", "en": "Big speed & passive income."}, "basePrice": 2500, "maxLevel": 10, "effects": {"tripSpeedMult": 0.25, "perSecondAdd": 6} },
      { "key": "makeup_glowup", "category": "cosmetics", "name": {"ru": "Глоу-ап", "en": "Glow Up"}, "desc": {"ru": "Временный ×2 к доходу на 30с.", "en": "Temporary ×2 income for 30s."}, "basePrice": 150, "maxLevel": 5, "effects": {"activeBoost": {"type": "multIncome", "mult": 2, "duration": 30}} }
    ]
  }
  </script>

  <script type="application/json" id="events-data">
  {
    "events": [
      { "key": "sale", "name": {"ru": "Фешн-распродажа", "en": "Fashion Sale"}, "chance": 0.02, "duration": 60, "cooldown": 120, "effects": {"shopDiscount": 0.2} },
      { "key": "traffic", "name": {"ru": "Пробка", "en": "Traffic"}, "chance": 0.015, "duration": 45, "cooldown": 90, "effects": {"tripSpeedMultiplier": 0.7} },
      { "key": "hype", "name": {"ru": "Соцсети хайп", "en": "Social Hype"}, "chance": 0.01, "duration": 30, "cooldown": 120, "effects": {"perClickMultiplier": 2} },
      { "key": "rain", "name": {"ru": "Дождь", "en": "Rain"}, "chance": 0.012, "duration": 30, "cooldown": 120, "effects": {"shoesDisabled": true, "superEventChance": 0.15} }
    ]
  }
  </script>

  <script type="application/json" id="achievements-data">
  {
    "achievements": [
      { "key": "first_look", "name": {"ru": "Первый образ", "en": "First Look"}, "desc": {"ru": "Купите 3 предмета из разных категорий.", "en": "Buy 3 items from different categories."}, "condition": {"type": "buyDistinct", "count": 3}, "reward": {"perClickAdd": 1} },
      { "key": "gloss_magnate", "name": {"ru": "Глянец-магнат", "en": "Gloss Magnate"}, "desc": {"ru": "Накопите 100 000 Сияния суммарно.", "en": "Accumulate 100,000 total Glow."}, "condition": {"type": "totalGlow", "value": 100000}, "reward": {"perSecondAdd": 3} },
      { "key": "lightspeed", "name": {"ru": "Скорость света", "en": "Lightspeed"}, "desc": {"ru": "Заполните поездку < 2 минут с начала цикла.", "en": "Finish a trip in under 2 minutes."}, "condition": {"type": "tripTimeLess", "seconds": 120}, "reward": {"tripSpeedMult": 0.05} },
      { "key": "collector", "name": {"ru": "Коллекционер", "en": "Collector"}, "desc": {"ru": "Откройте 10 уникальных предметов.", "en": "Own 10 unique items."}, "condition": {"type": "uniqueItems", "count": 10}, "reward": {"perClickMult": 0.05} },
      { "key": "event_hunter", "name": {"ru": "Ивент-хантер", "en": "Event Hunter"}, "desc": {"ru": "Активируйте 20 событий.", "en": "Activate 20 events."}, "condition": {"type": "eventsActivated", "count": 20}, "reward": {"eventChance": 0.003} },
      { "key": "ride_5", "name": {"ru": "Пилот заезда", "en": "Ride Pilot"}, "desc": {"ru": "Завершите 5 поездок.", "en": "Complete 5 trips."}, "condition": {"type": "tripsCompleted", "count": 5}, "reward": {"perSecondAdd": 2} },
      { "key": "ride_15", "name": {"ru": "Гонщица", "en": "Racer"}, "desc": {"ru": "Завершите 15 поездок.", "en": "Complete 15 trips."}, "condition": {"type": "tripsCompleted", "count": 15}, "reward": {"perClickAdd": 2} },
      { "key": "spender", "name": {"ru": "Шопоголик", "en": "Shopper"}, "desc": {"ru": "Потратьте 10 000 Сияния.", "en": "Spend 10,000 Glow."}, "condition": {"type": "spentGlow", "value": 10000}, "reward": {"shopDiscount": 0.05} },
      { "key": "boost_love", "name": {"ru": "Любитель бустов", "en": "Boost Lover"}, "desc": {"ru": "Активируйте 10 бустов.", "en": "Use 10 boosts."}, "condition": {"type": "boostsUsed", "count": 10}, "reward": {"boostDurationMult": 0.1} },
      { "key": "no_shoes_rain", "name": {"ru": "Танец под дождём", "en": "Dancing in Rain"}, "desc": {"ru": "Завершите поездку во время события «Дождь».", "en": "Finish a trip during the Rain event."}, "condition": {"type": "tripDuringEvent", "eventKey": "rain"}, "reward": {"perSecondAdd": 1} }
    ]
  }
  </script>

  <script type="application/json" id="i18n-ru">
  {
    "counter": { "glow": "Сияние", "perClick": "к/клик", "perSecond": "к/сек" },
    "cta": { "click": "Собрать стиль" },
    "trip": { "toFriend": "Путь к встрече с Серканом", "complete": "Встреча! Бонус: +{bonus}", "restart": "Новый заезд начался." },
    "tab": { "shop": "Магазин", "achievements": "Достижения", "settings": "Настройки" },
    "shop": { "category": { "clothes": "Одежда", "accessories": "Аксессуары", "transport": "Транспорт", "cosmetics": "Косметика" },
              "buy": "Купить",
              "owned": "Ур.",
              "price": "Цена",
              "activeBoost": "Активировать буст" },
    "ach": { "locked": "Скрыто", "reward": "Награда" },
    "settings": {
      "sound": "Звук",
      "animations": "Анимации",
      "highContrast": "Высокая контрастность",
      "language": "Язык",
      "save": "Сохранить",
      "export": "Экспорт JSON",
      "import": "Импорт JSON",
      "reset": "Сброс прогресса",
      "hint": "Экспорт сохраняет файл с вашим прогрессом. Импорт восстановит игру из файла."
    },
    "footer": { "hint": "Совет: нажимайте Пробел/Enter для клика. Долгое зажатие не ускоряет набор." }
  }
  </script>

  <script type="application/json" id="i18n-en">
  {
    "counter": { "glow": "Glow", "perClick": "g/click", "perSecond": "g/sec" },
    "cta": { "click": "Collect Style" },
    "trip": { "toFriend": "Trip to meet Serkan", "complete": "Meet-up! Bonus: +{bonus}", "restart": "New ride started." },
    "tab": { "shop": "Shop", "achievements": "Achievements", "settings": "Settings" },
    "shop": { "category": { "clothes": "Clothes", "accessories": "Accessories", "transport": "Transport", "cosmetics": "Cosmetics" },
              "buy": "Buy",
              "owned": "Lv.",
              "price": "Price",
              "activeBoost": "Activate Boost" },
    "ach": { "locked": "Hidden", "reward": "Reward" },
    "settings": {
      "sound": "Sound",
      "animations": "Animations",
      "highContrast": "High Contrast",
      "language": "Language",
      "save": "Save",
      "export": "Export JSON",
      "import": "Import JSON",
      "reset": "Reset Progress",
      "hint": "Export downloads your save. Import restores from file."
    },
    "footer": { "hint": "Tip: press Space/Enter to click. Holding does not speed up." }
  }
  </script>

  <!-- JS Modules -->
  <script type="module" src="src/main.js"></script>
</body>
</html>
